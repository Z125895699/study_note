<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        padding: 0;
        margin: 0;
      }

      .wrap {
        width: 300px;
        margin: 100px auto 0;
      }

      table {
        border-collapse: collapse;
        border-spacing: 0;
        border: 1px solid #c0c0c0;
        width: 300px;
      }

      th,
      td {
        border: 1px solid #d0d0d0;
        color: #404060;
        padding: 10px;
      }

      th {
        background-color: #09c;
        font: bold 16px '微软雅黑';
        color: #fff;
      }

      td {
        font: 14px '微软雅黑';
      }

      tbody tr {
        background-color: #f0f0f0;
      }

      tbody tr:hover {
        cursor: pointer;
        background-color: #fafafa;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <table>
        <thead>
          <tr>
            <th>
              <input type="checkbox" id="j_cbAll" />
            </th>
            <th>商品</th>
            <th>价钱</th>
          </tr>
        </thead>
        <tbody id="j_tb">
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>iPhone8</td>
            <td>8000</td>
          </tr>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>iPad Pro</td>
            <td>5000</td>
          </tr>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>iPad Air</td>
            <td>2000</td>
          </tr>
          <tr>
            <td>
              <input type="checkbox" />
            </td>
            <td>Apple Watch</td>
            <td>2000</td>
          </tr>
        </tbody>
      </table>
    </div>
    <script>
      //1、获取元素
      let j_cbAll = document.querySelector('#j_cbAll');
      console.log(j_cbAll);
      let j_tbs = document.getElementById('j_tb').getElementsByTagName('input');
      console.log(j_tbs);
      //2、绑定事件 处理程序
      //(1)、让下面的单选框跟随上面的复选框
      j_cbAll.onclick = function () {
        console.log(this.checked);
        for (let i = 0; i < j_tbs.length; i++) {
          j_tbs[i].checked = this.checked;
        }
      };
      //(2)、下面的单选框控制上面的复选框，如果有一项没有选，即复选框不选
      for (let i = 0; i < j_tbs.length; i++) {
        j_tbs[i].onclick = function () {
          // flag 控制全选按钮是否选中
          let flag = true;
          // 每次点击下面的复选框都要循环检查这4个小按钮是否全被选中
          for (let i = 0; i < j_tbs.length; i++) {
            //if()里面的意思是没有选中按钮  ！j_tbs[i].checked 第一次按下去是true
            if (!j_tbs[i].checked) {
              flag = false;
              break; // 退出for循环 这样可以提高执行效率 因为只要有一个没有选中，剩下的就无需循环判断了
            }
          }
          j_cbAll.checked = flag;
        };
      }
    </script>
  </body>
</html>
